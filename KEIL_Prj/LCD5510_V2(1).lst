C51 COMPILER V8.05a   LCD5510_V2_1_                                                        07/19/2017 21:53:05 PAGE 1   


C51 COMPILER V8.05a, COMPILATION OF MODULE LCD5510_V2_1_
OBJECT MODULE PLACED IN .\LCD5510_V2(1).obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\HARDWARE\DEVICES\DISPLAY\LCD5110\LCD5510_V2(1).C LARGE BROWSE DEBUG O
                    -BJECTEXTEND PRINT(.\LCD5510_V2(1).lst) TABS(2) OBJECT(.\LCD5510_V2(1).obj)

line level    source

   1          #include "LCD5510_V2.H"
*** WARNING C318 IN LINE 1 OF ..\HARDWARE\DEVICES\DISPLAY\LCD5110\LCD5510_V2(1).C: can't open file 'LCD5510_V2.H'
   2          #include "../../../BSP/GPIO.h"
   3          
   4          
   5          /*--------------------------------------------------------------*/
   6          //写入一个字节(数据或指令)
   7          //wbyte:  待写入的数据
   8          //dat_cmd:  1-数据, 0-指令
   9          void LCD_write_byte(unsigned char wbyte, unsigned char dat_cmd)
  10          {
  11   1        unsigned char i;
  12   1        
  13   1        LCD_CS = 0;     //使能
*** ERROR C202 IN LINE 13 OF ..\HARDWARE\DEVICES\DISPLAY\LCD5110\LCD5510_V2(1).C: 'LCD_CS': undefined identifier
  14   1        LCD_DC = dat_cmd; //1-数据  //0-指令
*** ERROR C202 IN LINE 14 OF ..\HARDWARE\DEVICES\DISPLAY\LCD5110\LCD5510_V2(1).C: 'LCD_DC': undefined identifier
  15   1      
  16   1        for(i = 8; i; i--)  //8位数据, 先高后低
  17   1        {
  18   2          if(wbyte & 0x80) {LCD_DIN = 1;}
*** ERROR C202 IN LINE 18 OF ..\HARDWARE\DEVICES\DISPLAY\LCD5110\LCD5510_V2(1).C: 'LCD_DIN': undefined identifier
  19   2          else       {LCD_DIN = 0;}
*** ERROR C202 IN LINE 19 OF ..\HARDWARE\DEVICES\DISPLAY\LCD5110\LCD5510_V2(1).C: 'LCD_DIN': undefined identifier
  20   2          
  21   2          LCD_CLK = 0;
*** ERROR C202 IN LINE 21 OF ..\HARDWARE\DEVICES\DISPLAY\LCD5110\LCD5510_V2(1).C: 'LCD_CLK': undefined identifier
  22   2          wbyte <<= 1;  //移位(延时)
  23   2          LCD_CLK = 1;  //上升沿写入
*** ERROR C202 IN LINE 23 OF ..\HARDWARE\DEVICES\DISPLAY\LCD5110\LCD5510_V2(1).C: 'LCD_CLK': undefined identifier
  24   2        }
  25   1        
  26   1        LCD_CS = 1;     //禁止
*** ERROR C202 IN LINE 26 OF ..\HARDWARE\DEVICES\DISPLAY\LCD5110\LCD5510_V2(1).C: 'LCD_CS': undefined identifier
  27   1      }
  28          
  29          
  30          /*--------------------------------------------------------------*/
  31          //写入n个字节(数据)(ROM)
  32          //*wbyte: 待写入的数据指针
  33          //num:    待写入的数据个数
  34          /*void LCD_write_nbyte(unsigned char code *wbyte, unsigned char num)
  35          {
  36            unsigned char i, j;
  37            unsigned char temp;
  38          
  39            LCD_CS = 0;     //使能
  40            LCD_DC = 1;     //数据
  41          
  42            for(j = 0; j < num; j++)//num个数据
  43            {
  44              temp = wbyte[j];
  45              for(i = 8; i; i--)  //8位数据, 先高后低
  46              {
C51 COMPILER V8.05a   LCD5510_V2_1_                                                        07/19/2017 21:53:05 PAGE 2   

  47                if(temp & 0x80) {LCD_DIN = 1;}
  48                else      {LCD_DIN = 0;}
  49              
  50                LCD_CLK = 0;
  51                temp <<= 1;   //移位(延时)
  52                LCD_CLK = 1;  //上升沿写入
  53              } 
  54            }
  55            
  56            LCD_CS = 1;     //禁止
  57          }
  58          
  59          
  60          /*--------------------------------------------------------------*/
  61          //显示清屏(清DDRAM)
  62          void LCD_clr_scr(void)
  63          {
  64   1        unsigned int i;
  65   1        
  66   1        LCD_write_cmd(X_Col_Addr);
*** ERROR C202 IN LINE 66 OF ..\HARDWARE\DEVICES\DISPLAY\LCD5110\LCD5510_V2(1).C: 'X_Col_Addr': undefined identifier
  67   1        LCD_write_cmd(Y_Page_Addr);
*** ERROR C202 IN LINE 67 OF ..\HARDWARE\DEVICES\DISPLAY\LCD5110\LCD5510_V2(1).C: 'Y_Page_Addr': undefined identifier
  68   1        
  69   1        for(i = 504; i; i--) LCD_write_dat(0x00);
  70   1      }
  71          
  72          
  73          /*--------------------------------------------------------------*/
  74          //显示清行
  75          //num:  0 - 5
  76          void LCD_clr_row(unsigned char num)
  77          {
  78   1        unsigned char i;
  79   1        
  80   1        LCD_pos_byte(0, num);
  81   1        for(i = 84; i; i--) LCD_write_dat(0x00);
  82   1      }
  83          
  84          
  85          /*--------------------------------------------------------------*/
  86          //液晶字节定位(1*1)
  87          //液晶规划:
  88          //x: 0 - 83
  89          //y: 0 - 5
  90          void LCD_pos_byte(unsigned char x, unsigned char y)
  91          {
  92   1        x |= X_Col_Addr;  
  93   1        y |= Y_Page_Addr; 
  94   1        LCD_write_cmd(x); //列地址
  95   1        LCD_write_cmd(y); //页地址
  96   1      }
  97          
  98          
  99          /*--------------------------------------------------------------*/
 100          //液晶字符输出(6*8字体)
 101          //x: 0 - 13
 102          //y: 0 - 5
 103          void LCD_printc(unsigned char x, unsigned char y, unsigned char c_dat)
 104          {
 105   1        unsigned char i;
 106   1      
C51 COMPILER V8.05a   LCD5510_V2_1_                                                        07/19/2017 21:53:05 PAGE 3   

 107   1        c_dat -= 32;    //查表
 108   1        x *= 6;       //宽6
 109   1      
 110   1        LCD_pos_byte(x, y); //坐标
 111   1        for(i = 0; i < 6; i++) LCD_write_dat(Font_code[c_dat][i]);  
 112   1      }
 113          
 114          
 115          /*--------------------------------------------------------------*/
 116          //液晶字符串输出(6*8字体)
 117          //x: 0 - 13
 118          //y: 0 - 5
 119          void LCD_prints(unsigned char x, unsigned char y, unsigned char *s_dat)
 120          {
 121   1        while(*s_dat && x < 14) {LCD_printc(x++, y, *s_dat); s_dat++;}
 122   1      }
 123          
 124          
 125          /*--------------------------------------------------------------*/
 126          //液晶字符串输出,自动换行(6*8字体)
 127          //x: 0 - 13
 128          //y: 0 - 5
 129          void LCD_printsl(unsigned char x, unsigned char y, unsigned char *s_dat)
 130          {
 131   1        while(*s_dat) 
 132   1        {
 133   2          LCD_printc(x++, y, *s_dat); 
 134   2          s_dat++;
 135   2          if(x == 14) {x = 0; y++;}
 136   2          if(y == 6)  {y = 0;}
 137   2        }
 138   1      }
 139          
 140          
 141          /*--------------------------------------------------------------*/
 142          //复位LCD5510
 143          /*void LCD_reset_5510(void)
 144          {
 145            LCD_clr_scr();        //清全屏
 146            
 147            LCD_write_cmd(0x25);    //省电模式, 水平寻址, 扩展指令
 148            LCD_write_cmd(0x04);    //VLCD温度系数0
 149            LCD_write_cmd(0x10);    //设置偏置系统(BSx)
 150            LCD_write_cmd(0xc0);    //设置电压VLCD = 3.06 + 0.06*Vop;
 151            
 152            LCD_write_cmd(0x24);    //省电模式, 水平寻址, 常规指令
 153            LCD_write_cmd(0x08);    //显示空白
 154            LCD_write_cmd(Y_Page_Addr); //起始页地址0
 155            LCD_write_cmd(X_Col_Addr);  //起始列地址0
 156          }
 157          
 158          
 159          /*--------------------------------------------------------------*/
 160          //初始化LCD5510
 161          void LCD5510_Init(void)
 162          {  
 163   1        GPIO_InitTypeDef    GPIO_InitStructure;     //设置管脚
 164   1          GPIO_InitStructure.Mode = GPIO_PullUp;
 165   1          GPIO_InitStructure.Pin = GPIO_Pin_0||GPIO_Pin_1||GPIO_Pin_2||GPIO_Pin_3||GPIO_Pin_4;    //lcd5110
 166   1        GPIO_Inilize(GPIO_P5, &GPIO_InitStructure);  
 167   1        LCD_reset_hard;       //硬件复位
 168   1      //  LCD_reset_soft;       //软件复位
C51 COMPILER V8.05a   LCD5510_V2_1_                                                        07/19/2017 21:53:05 PAGE 4   

 169   1      
 170   1        LCD_write_cmd(0x21);    //工作模式, 水平寻址, 扩展指令
 171   1        LCD_write_cmd(0x06);    //VLCD温度系数2
 172   1        LCD_write_cmd(0x13);    //设置偏置系统(BSx) 1:48
 173   1        LCD_write_cmd(0xc8);    //设置电压VLCD = 3.06 + 0.06*Vop, 对比度调整
 174   1      
 175   1        LCD_write_cmd(0x20);    //工作模式, 水平寻址, 常规指令
 176   1        LCD_write_cmd(0x0c);    //普通模式
 177   1        LCD_write_cmd(Y_Page_Addr); //起始页地址0
 178   1        LCD_write_cmd(X_Col_Addr);  //起始列地址0
 179   1        LCD_clr_scr();        //清全屏
 180   1      }
 181          
 182          /*--------------------------------------------------------------*/
 183            
 184          
 185          
 186          
 187          
 188           

C51 COMPILATION COMPLETE.  1 WARNING(S),  9 ERROR(S)
